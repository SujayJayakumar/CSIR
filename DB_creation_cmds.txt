-- Table to store node master info
CREATE TABLE nodes (
    node_id TEXT PRIMARY KEY,
    core_count INTEGER NOT NULL,
    is_gpu BOOLEAN
);

-- Metrics from sensors (temperature and power)
CREATE TABLE node_metrics (
    id SERIAL PRIMARY KEY,
    node_id TEXT REFERENCES nodes(node_id),
    timestamp TIMESTAMP(6) NOT NULL,
    cpu1_temp REAL,
    cpu2_temp REAL,
    power_consumption REAL,
    UNIQUE (timestamp, node_id)
);

-- Node load readings
CREATE TABLE node_load (
    id SERIAL PRIMARY KEY,
    node_id TEXT REFERENCES nodes(node_id),
    timestamp TIMESTAMP(6) NOT NULL,
    load REAL,
    UNIQUE (timestamp, node_id)  
);


-- Summary of cluster health
CREATE TABLE node_status (
    id SERIAL PRIMARY KEY,
    timestamp TIMESTAMP(6) NOT NULL,
    total_nodes INTEGER,
    online INTEGER,
    offline INTEGER,
    down INTEGER
);

